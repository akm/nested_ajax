<%% nested_ajax_pane(@<%= controller_singular_name %>, :controller => '<%= controller_name %>') do |pane| -%>

  <%% if pane.root? -%>
    <h1>Editing <%= controller_singular_name %></h1>
  <%% end -%>

  <%% pane.form_for(@<%= controller_singular_name %>, :url => <%= controller_resource_name_singularized %>_path(@<%= controller_singular_name %>), :method => :put) do |f| %>
    <%%= f.error_messages %>

    <%%= render :partial => '<%= controller_name %>/form', :locals => {:f => f} %>

    <div class="commands">
      <%%= f.submit 'Update' %>
      <%%= pane.link_to_edit_cancel('Cancel') unless pane.root? %>
    </div>
  <%% end %>

  <%% if pane.root? -%>
    <%%= link_to 'Show', <%= controller_resource_name_singularized %>_path(@<%= controller_singular_name %>) %> |
    <%%= link_to 'Back', <%= controller_resource_name %>_path %>
  <%% end -%>

<%% end -%>
